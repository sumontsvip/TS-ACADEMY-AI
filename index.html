<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>TS ACADEMY AI</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f6f8;
      margin: 0;
      padding: 20px;
    }
    h1 {
      text-align: center;
      margin-bottom: 30px;
    }
    .card {
      background: #fff;
      padding: 16px;
      margin-bottom: 15px;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.08);
    }
    .row {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .buy { color: green; font-weight: bold; }
    .sell { color: red; font-weight: bold; }
    .wait { color: orange; font-weight: bold; }
  </style>
</head>
<body>

<h1>TS ACADEMY AI</h1>

<div class="card">
  <div class="row">
    <h2>BTCUSDT</h2>
    <span id="btcStatus" class="wait">WAITING</span>
  </div>
  <p>Price: <span id="btcPrice">--</span></p>
</div>

<div class="card">
  <div class="row">
    <h2>ETHUSDT</h2>
    <span id="ethStatus" class="wait">WAITING</span>
  </div>
  <p>Price: <span id="ethPrice">--</span></p>
</div>

<script>
  function fibSignal(price, high, low) {
    const fib05 = low + (high - low) * 0.5;
    const aggressive = (high - low) / low > 0.01; // 1% move

    if (!aggressive) return "WAITING";
    if (price > fib05) return "BUY";
    if (price < fib05) return "SELL";
    return "WAITING";
  }

  function statusClass(status) {
    if (status === "BUY") return "buy";
    if (status === "SELL") return "sell";
    return "wait";
  }

  function connect(symbol, priceEl, statusEl, high, low) {
    const ws = new WebSocket(
      wss://stream.binance.com:9443/ws/${symbol.toLowerCase()}@trade
    );

    ws.onmessage = (e) => {
      const data = JSON.parse(e.data);
      const price = parseFloat(data.p);

      priceEl.innerText = price.toFixed(2);

      const status = fibSignal(price, high, low);
      statusEl.innerText = status;
      statusEl.className = statusClass(status);
    };
  }

  // TEMP fixed range (next step e dynamic hobe)
  connect(
    "BTCUSDT",
    document.getElementById("btcPrice"),
    document.getElementById("btcStatus"),
    70000,
    65000
  );

  connect(
    "ETHUSDT",
    document.getElementById("ethPrice"),
    document.getElementById("ethStatus"),
    4000,
    3500
  );
</script>

</body>
</html>
